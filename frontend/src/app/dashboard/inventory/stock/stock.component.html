@if (selectLanguage$ | async; as language) {
    <app-main-content
            [language]="language"
            [headerText]="'Stock' | translate : language.lang"
            [noDataMessage]="'There is no data to show' | translate : language?.lang"
            [noData]="stock.length === 0"
    >
        <div headerActions>
            <button
                    [routerLink]="['/dashboard/inventory/replenishment']"
                    class="w-max p-4 my-1 font-medium text-secondary rounded-lg bg-secondary/30 ms-3 hover:bg-primary/90 hover:text-white"
            >
                {{ "Add Replenishment" | translate : language.lang }}
            </button>
            <button
                    [routerLink]="'create'"
                    class="w-max p-4 my-1 font-medium text-white rounded-lg bg-secondary ms-3 hover:bg-secondary/70"
            >
                {{ "Add opening balance" | translate : language.lang }}
            </button>
        </div>
        <div headerSlot>
            <app-search-input
                    [placeholder]="'Search' | translate : language?.lang"
                    (searchChanged)="onSearchChanged($event)"
                    [value]="productNumber"
            />
        </div>

        @if (stock.length > 0) {

            <div contentWithData class="relative w-full h-full p-8 min-h-max">


                <div class="relative my-4 overflow-x-auto overflow-y-auto">

                    <table class="w-full text-sm text-left rtl:text-right">
                        <thead class="text-xs uppercase text-secondary/50">
                        <tr>
                            @for (col of tableColumns; track $index) {
                                <th scope="col" class="px-6 py-3 min-w-40">
                                    {{ col | translate : language.lang }}
                                </th>
                            }
                        </tr>
                        </thead>
                        <tbody>
                            @for (group of stockGrouped; track group[0]) {
                                <tr
                                        class="bg-white border-b border-secondary/15 bg-secondary/30 hover:bg-secondary/50 text-secondary/80 cursor-pointer"

                                >
                                    <td class="px-6 py-4">

                                        {{ group[0] }}
                                    </td>
                                    <td class="px-6 py-4">
                                    </td>
                                    <td class="px-6 py-4">
                                    </td>
                                    <td class="px-6 py-4">
                                    </td>
                                    <td class="px-6 py-4">
                                    </td>
                                    <td class="px-6 py-4">
                                    </td>
                                    <td class="px-6 py-4">
                                    </td>
                                </tr>
                                @for (item of group[1]; track item.id) {
                                    <tr
                                            class="bg-white border-b border-secondary/15 hover:bg-secondary/5 text-secondary/80 cursor-pointer"
                                    >

                                        <td class="px-6 py-4">
                                            {{ item.product.productNumber }}
                                        </td>
                                        <td class="px-6 py-4">
                                            {{ language.lang == "ar" ? item.product.mainBrand.nameAr : item.product.mainBrand.nameEn }}
                                        </td>
                                        <td class="px-6 py-4">
                                            {{ language.lang == "ar" ? item.product.subBrand.nameAr : item.product.subBrand.nameEn }}
                                        </td>
                                        <td class="px-6 py-4">
                                            {{ language.lang == "ar" ? item.product.country.nameAr : item.product.country.nameEn }}
                                        </td>
                                        <td class="px-6 py-4">
                                            {{ language.lang == "ar" ? item.store.nameAr : item.store.nameEn }}
                                        </td>
                                        <td class="px-6 py-4">
                                            {{ item.location ? (language.lang == "ar" ? item.location.nameAr : item.location.nameEn) : '' }}
                                        </td>
                                        <td class="px-6 py-4">
                                            {{ item.qunatity }}
                                        </td>


                                    </tr>
                                }
                            }

                        </tbody>
                    </table>


                    <!--                    <table class="w-full text-sm text-left rtl:text-right">-->
                    <!--                        <thead class="text-xs uppercase text-secondary/50">-->
                    <!--                        <tr>-->
                    <!--                            @for (col of tableColumns; track $index) {-->
                    <!--                                <th scope="col" class="px-6 py-3 min-w-40">-->
                    <!--                                    {{ col | translate : language.lang }}-->
                    <!--                                </th>-->
                    <!--                            }-->
                    <!--                        </tr>-->
                    <!--                        </thead>-->
                    <!--                        <tbody>-->
                    <!--                            @for (item of stock; track item.id) {-->

                    <!--                                <tr-->
                    <!--                                        class="bg-white border-b border-secondary/15 hover:bg-secondary/5 text-secondary/80 cursor-pointer"-->
                    <!--                                >-->
                    <!--&lt;!&ndash;                                        [routerLink]="'' + item.id"&ndash;&gt;-->

                    <!--                                    <td class="px-6 py-4">-->
                    <!--                                        {{ item.product.productNumber }}-->
                    <!--                                    </td>-->
                    <!--                                    <td class="px-6 py-4">-->
                    <!--                                        {{ language.lang == "ar" ? item.product.mainBrand.nameAr : item.product.mainBrand.nameEn }}-->
                    <!--                                    </td>-->
                    <!--                                    <td class="px-6 py-4">-->
                    <!--                                        {{ language.lang == "ar" ? item.product.subBrand.nameAr : item.product.subBrand.nameEn }}-->
                    <!--                                    </td>-->
                    <!--                                    <td class="px-6 py-4">-->
                    <!--                                        {{ language.lang == "ar" ? item.product.country.nameAr : item.product.country.nameEn }}-->
                    <!--                                    </td>-->
                    <!--                                    <td class="px-6 py-4">-->
                    <!--                                        {{ language.lang == "ar" ? item.store.nameAr : item.store.nameEn }}-->
                    <!--                                    </td>-->
                    <!--                                    <td class="px-6 py-4">-->
                    <!--                                        {{ item.location ? (language.lang == "ar" ? item.location.nameAr : item.location.nameEn): ''}}-->
                    <!--                                    </td>-->
                    <!--                                    <td class="px-6 py-4">-->
                    <!--                                        {{ item.qunatity}}-->
                    <!--                                    </td>-->


                    <!--                                </tr>-->
                    <!--                            }-->
                    <!--                        </tbody>-->
                    <!--                    </table>-->
                </div>

                <!--            If there are more than one page -->
                @if (true) {
                    <div class="flex items-center my-8 me-4 ms-auto w-fit">
                        @if (language.dir == 'ltr') {

                            <div class="px-2 py-1 border rounded border-secondary/15 me-1  "
                                 [ngClass]="stockResponse.first ? 'bg-primary/20 ':'hover:bg-primary/80 cursor-pointer'"
                                 (click)="onPageChanged(stockResponse.first ? -1: currentPage-1)"
                            >
                                <svg
                                        class="w-6 h-6 text-secondary/50"
                                        aria-hidden="true"
                                        xmlns="http://www.w3.org/2000/svg"
                                        fill="none"
                                        viewBox="0 0 24 24"
                                >
                                    <path
                                            stroke="currentColor"
                                            stroke-linecap="round"
                                            stroke-linejoin="round"
                                            stroke-width="2"
                                            d="m15 19-7-7 7-7"
                                    />
                                </svg>
                            </div>
                        } @else {
                            <div class="px-2 py-1 border rounded border-secondary/15 me-1  "
                                 [ngClass]="stockResponse.first ? 'bg-primary/20 ':'hover:bg-primary/80 cursor-pointer'"
                                 (click)="onPageChanged(stockResponse.first ? -1: currentPage-1)"
                            >
                                <svg
                                        class="w-6 h-6 text-secondary/50"
                                        aria-hidden="true"
                                        xmlns="http://www.w3.org/2000/svg"
                                        fill="none"
                                        viewBox="0 0 24 24"
                                >
                                    <path
                                            stroke="currentColor"
                                            stroke-linecap="round"
                                            stroke-linejoin="round"
                                            stroke-width="2"
                                            d="m9 5 7 7-7 7"
                                    />
                                </svg>
                            </div>
                        }
                        @for (i of generatePageArray(); track $index) {

                            <div
                                    class="px-3 py-1 border rounded border-secondary/15 me-1 "
                                    [ngClass]="+pageable.pageNumber == $index ? 'bg-primary/80 ':' hover:bg-primary/80 cursor-pointer'"
                                    (click)="onPageChanged($index)"

                            >{{ $index + 1 }}
                            </div>

                        }

                        @if (language.dir == 'ltr') {

                            <div class="px-2 py-1 border rounded border-secondary/15 me-1  "
                                 [ngClass]="stockResponse.last ? 'bg-primary/20 ':'hover:bg-primary/80 cursor-pointer'"
                                 (click)="onPageChanged(stockResponse.last ? -1: +currentPage+1)"
                            >
                                <svg
                                        class="w-6 h-6 text-secondary/50"
                                        aria-hidden="true"
                                        xmlns="http://www.w3.org/2000/svg"
                                        fill="none"
                                        viewBox="0 0 24 24"
                                >
                                    <path
                                            stroke="currentColor"
                                            stroke-linecap="round"
                                            stroke-linejoin="round"
                                            stroke-width="2"
                                            d="m9 5 7 7-7 7"
                                    />
                                </svg>
                            </div>

                        } @else {


                            <div class="px-2 py-1 border rounded border-secondary/15 me-1  "
                                 [ngClass]="stockResponse.last ? 'bg-primary/20 ':'hover:bg-primary/80 cursor-pointer'"
                                 (click)="onPageChanged(stockResponse.last ? -1: +currentPage+1)"
                            >
                                <svg
                                        class="w-6 h-6 text-secondary/50"
                                        aria-hidden="true"
                                        xmlns="http://www.w3.org/2000/svg"
                                        fill="none"
                                        viewBox="0 0 24 24"
                                >
                                    <path
                                            stroke="currentColor"
                                            stroke-linecap="round"
                                            stroke-linejoin="round"
                                            stroke-width="2"
                                            d="m15 19-7-7 7-7"
                                    />
                                </svg>
                            </div>
                        }
                    </div>
                }
            </div>
        }
    </app-main-content>
}
